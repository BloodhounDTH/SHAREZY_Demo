<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SHAREZY Admin</title>
  <link rel="icon" href="../assets/logo.png" />
  <link rel="stylesheet" href="./style_admin.css" />
  <!-- ‡∏Å‡∏£‡∏≤‡∏ü‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Dashboard -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Header -->
  <header>
    <h1>SHAREZY Admin</h1>
    <button id="btnBackHome">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</button>
  </header>

  <!-- Sidebar (‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏°‡∏ß‡∏î + ‡∏≠‡∏µ‡πÇ‡∏°‡∏à‡∏¥) -->
  <aside id="leftMenu" class="sidebar">
    <div class="section-title">Overview</div>
    <a href="#dashboard" data-page="dashboard">‚öôÔ∏è Dashboard</a>

    <div class="section-title">User Management</div>
    <a href="#users" data-page="users">üë• User</a>
    <a href="#renter" data-page="renter">üè¨ Owner</a>

    <div class="section-title">Products</div>
    <a href="#product-search" data-page="product-search">üîé Search Product</a>
    <a href="#product-approve" data-page="product-approve">‚úÖ Approve Product</a>
    <a href="#product-rejected" data-page="product-rejected">‚õî Rejected Product</a>

    <div class="section-title">Marketing</div>
    <a href="#saller" data-page="saller">üìä Seller</a>
    <a href="#merchant-register" data-page="merchant-register">üìù Merchant Register</a>
    <a href="#cases" data-page="cases">‚öñÔ∏è Dispute Cases</a>

    <div class="section-title">Documents</div>
    <a href="#documents" data-page="documents">üìÑ Agreement</a>
  </aside>

  <!-- Main -->
  <main>
    <!-- DASHBOARD -->
    <section data-view="dashboard">
    <h2>Dashboard</h2>

    <!-- ‡πÅ‡∏ñ‡∏ß 1: Visitors Online ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß -->
    <div class="dash-row">
      <div class="card visitors-banner">
        <div class="v-label">Visitors Online</div>
        <div class="v-value" id="visitorsOnline">0</div>
        <div class="v-unit">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ (real-time)</div>
      </div>
    </div>

    <!-- ‡πÅ‡∏ñ‡∏ß 2: 3 ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á -->
    <div class="dash-row center-3">
      <div class="card mid-kpi">
        <h3>Weekly Sales</h3>
        <p id="weeklySales">0 ‡∏ö‡∏≤‡∏ó</p>
        <small id="weeklySalesDeltaText">‚Äî</small>
      </div>
      <div class="card mid-kpi">
        <h3>Weekly Orders</h3>
        <p id="weeklyOrders">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
        <small id="weeklyOrdersDeltaText">‚Äî</small>
      </div>
      <div class="card mid-kpi">
        <h3>Top Seller</h3>
        <ol id="topSellers" class="topsellers"></ol>
      </div>
    </div>

    <!-- ‡πÅ‡∏ñ‡∏ß 3: ‡∏õ‡∏∏‡πà‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ -->
    <div class="dash-row">
      <div id="dashControls" class="range-bar">
        <button class="btn" data-range="1h">1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</button>
        <button class="btn" data-range="3h">3 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</button>
        <button class="btn" data-range="6h">6 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</button>
        <button class="btn" data-range="12h">12 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</button>
        <button class="btn" data-range="1d">1 ‡∏ß‡∏±‡∏ô</button>
        <button class="btn" data-range="3d">3 ‡∏ß‡∏±‡∏ô</button>
        <button class="btn" data-range="7d">7 ‡∏ß‡∏±‡∏ô</button>
        <button class="btn" data-range="30d">30 ‡∏ß‡∏±‡∏ô</button>
        <button class="btn" data-range="90d">3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
        <button class="btn" data-range="180d">6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
        <button class="btn" data-range="1y">1 ‡∏õ‡∏µ</button>
        <button class="btn" data-range="2y">2 ‡∏õ‡∏µ</button>
        <button class="btn" data-range="3y">3 ‡∏õ‡∏µ</button>
        <label class="compare">
          <input type="checkbox" id="dashCompare"> ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡∏ä‡πà‡∏ß‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
        </label>
      </div>
    </div>

    <!-- ‡πÅ‡∏ñ‡∏ß 4: ‡∏Å‡∏£‡∏≤‡∏ü 80 / Top Categories 20 -->
    <div class="dash-row graph-row">
      <div class="card graph-cell">
        <h3>Visit & Sales Statistics</h3>
        <div class="chart-wrap"><canvas id="visitChart"></canvas></div>
      </div>
      <div class="card side-cell">
        <h3>üî• Top Categories (‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)</h3>
        <div class="chart-wrap sm"><canvas id="catChart"></canvas></div>
      </div>
    </div>

    <!-- ‡πÅ‡∏ñ‡∏ß 5: ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà 70 / Insights 30 -->
    <div class="dash-row map-row">
      <div class="card map-cell">
        <h3>üó∫Ô∏è ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏°‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)</h3>
        <div id="thMapHost" class="th-map"></div>
      </div>
      <div class="card insights-cell">
        <h3>üìà Executive Insights</h3>
        <ul id="execInsights" class="insights-list"></ul>
      </div>
    </div>
  </section>



    <!-- SALLER -->
    <section data-view="saller" hidden>
      <h2>üìä Saller</h2>

      <!-- ‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå -->
      <div class="saller-filters" style="display:flex;flex-wrap:wrap;gap:8px;align-items:end;margin-bottom:10px">
        <div style="flex:1;min-width:200px">
          <label>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</label><br/>
          <input type="text" id="sl_search" placeholder="‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå/‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤">
          <button id="sl_apply" class="btn">‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ</button>
          <button id="sl_reset" class="btn">‡∏•‡πâ‡∏≤‡∏á</button>
          <button id="sl_export" class="btn">Export CSV</button>
        </div>
      </div>


      <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á -->
      <table id="tblSaller" class="table">
        <thead>
          <tr>
            <th data-sort="createdAt">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
            <th data-sort="id">‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</th>
            <th data-sort="owner">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</th>
            <th data-sort="title">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
            <th data-sort="qty" style="text-align:right">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
            <th data-sort="total" style="text-align:right">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th>
            <th data-sort="status">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <!-- Modal ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö -->
      <div class="mask" style="display:none"></div>
      <div id="productModal" style="display:none"></div>
    </section>


    <!-- USERS -->
    <section data-view="users" hidden>
      <h2>üë• Users</h2>
      <input type="text" id="userSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ..."/>
      <select id="userRole">
        <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
        <option value="renter">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</option>
        <option value="owner">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</option>
        <option value="admin">Admin</option>
      </select>
      <button id="btnReloadUsers">Reload</button>
      <table id="tblUsers">
        <thead>
          <tr><th>ID</th><th>Name</th><th>Email</th><th>Role</th><th>Level</th><th>Phone</th><th>Action</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- RENTER -->
    <section data-view="renter" hidden>
      <h2>üè¨ Renter</h2>

      <!-- Filter bar -->
      <div class="renter-filters" style="display:flex;flex-wrap:wrap;gap:8px;align-items:end;margin-bottom:10px">
        <div style="flex:1;min-width:220px">
          <input type="text" id="r_search" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô / ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡πÄ‡∏•‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
          <button id="r_apply" class="btn">‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ</button>
          <button id="r_reset" class="btn">‡∏•‡πâ‡∏≤‡∏á</button>
        </div>
      </div>

      <!-- Owner list -->
      <div id="ownerList" class="card-grid"></div>

      <!-- Owner detail modal -->
      <div class="mask" id="r_mask" style="display:none"></div>
      <div id="ownerModal" style="display:none"></div>

      <!-- Product edit modal (reuse) -->
      <div id="productModal" style="display:none"></div>
    </section>


    <!-- MERCHANT REGISTER -->
    <section data-view="merchant-register" hidden>
      <h2>üìù Merchant Register</h2>
      <div id="merchantCards" class="cards-grid"><!-- JS ‡πÄ‡∏ï‡∏¥‡∏° 15 ‡∏£‡πâ‡∏≤‡∏ô --></div>
    </section>

    <!-- PRODUCTS: APPROVE -->
    <section data-view="product-approve" hidden>
      <h2>‚úÖ Approve Product</h2>
      <input type="text" id="productSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..."/>
      <button id="btnProductRefresh">Refresh</button>

      <table id="tblProducts">
        <thead><tr><th>Details</th><th>Category</th><th>Price/Day</th><th>Status</th><th>Owner</th><th>Action</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- PRODUCTS: SEARCH -->
    <section data-view="product-search" hidden>
      <h2>üîé Search Product</h2>
      <input type="text" id="productSearchAll" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..."/>
      <table id="tblProductsAll">
        <thead><tr><th>ID</th><th>Picture</Picture></th><th>Details</Details></th><th>Category</th><th>Price/Day</th><th>Owner</th><th>Status</th><th>Action</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- PRODUCTS: REJECTED -->
    <section data-view="product-rejected" hidden>
      <h2>‚õî Rejected Product</h2>
      <table id="tblProductsRejected">
        <thead><tr><th>Date</th><th>Owner</th><th>Product</th><th>Details</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- CASES -->
    <section data-view="cases" hidden>
      <h2>‚öñÔ∏è Dispute Cases</h2>
      <table id="tblCases">
        <thead><tr><th>#</th><th>Order ID</th><th>Case</th><th>Status</th><th>Created</th></tr></thead>
        <tbody></tbody>
      </table>
    </section>

    <!-- DOCUMENTS -->
    <section data-view="documents" hidden>
      <h2>üìÑ Document</h2>
      <input type="text" id="docSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Order Number..."/>
      <table id="tblDocs" class="table">
        <thead>
          <tr>
            <th>Order No</th>
            <th>User (Owner)</th>
            <th>Renter</th>
            <th>Created</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </main>

  <!-- Modals -->
  <div class="mask"></div>

  <div id="productModal">
    <h3>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
    <input id="pm_id" type="hidden" />
    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
    <input id="pm_title" type="text" />
    <label>‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏ß‡∏±‡∏ô</label>
    <input id="pm_price" type="number" />
    <label>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
    <select id="pm_status">
      <option value="pending">Pending</option>
      <option value="approved">Approved</option>
      <option value="rejected">Rejected</option>
    </select>
    <label>Owner ID</label>
    <input id="pm_ownerId" type="text" />
    <button id="pm_save">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
    <button id="pm_cancel">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
  </div>

  <div id="caseModal"></div>
  <div id="tip"></div>

  <!-- Load data (‡∏ê‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å www/js) -->
  <script src="../js/user.js"></script>
  <script src="../js/item_clothes.js"></script>
  <script src="../js/item_tools.js"></script>
  <script src="../js/order-management.js"></script>
  <script src="../js/signature.js"></script>

  <!-- Main App (router + modules) -->
  <script type="module" src="./js/app.js"></script>
  <!-- amCharts v3 (Thailand map) -->
  <script src="https://www.amcharts.com/lib/3/ammap.js"></script>
  <script src="https://www.amcharts.com/lib/3/maps/js/thailandLow.js"></script>
  <script src="https://www.amcharts.com/lib/3/themes/light.js"></script>

</body>
</html>
